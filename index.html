<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>GDOT Projects</title>
  <link rel="icon" type="image/png" sizes="32x32" href="assets/road.png">
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />

  <!-- mapbox -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.10.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.10.0/mapbox-gl.js"></script>
  <link rel="stylesheet" href="styles/style.css">
  </style>

  <!-- geocoder -->
  <script
    src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.3/mapbox-gl-geocoder.min.js"></script>
  <link rel="stylesheet"
    href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.3/mapbox-gl-geocoder.css" type="text/css">

  <!-- google font -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">

  <!-- shoelace for UI components -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.0/cdn/themes/light.css" />
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.0/cdn/shoelace-autoloader.js"></script>

  <!-- Google Material Icons -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=map_search" />


</head>

<body>

  <!-- container for the geocoder search -->
  <div id="geocoder-container"></div>

  <!-- main map div -->
  <div id="map"></div>

  <!-- holds the text box showing the last updated date -->
  <div id="last-updated"></div>

  <!-- header -->
  <header>
    GDOT Projects Map
  </header>

  <!-- shoelace drawer for filters -->
  <sl-drawer label="" placement="start" class="drawer-placement" hidden>

    <div style="text-align: center; margin-top: -20px; margin-bottom: -10px;">
      <h3>Select Geography Level</h3>
    </div>

    <div style="text-align: center;">
      <sl-radio-group id="geographySelect" label="" value="District">
        <sl-radio-button value="City">City</sl-radio-button>
        <sl-radio-button value="County">County</sl-radio-button>
        <sl-radio-button value="District">District</sl-radio-button>
        <sl-radio-button value="Statewide">Statewide</sl-radio-button>
      </sl-radio-group>
    </div>

    <div style="text-align: center; margin-top: 30px; margin-bottom: -10px;">
      <h3>Map Filters</h3>
    </div>

    <sl-select id="geoDropdownSelect" label="By Congressional District:" value=4>
      <sl-option value=1>1</sl-option>
      <sl-option value=2>2</sl-option>
      <sl-option value=3>3</sl-option>
      <sl-option value=4>4</sl-option>
      <sl-option value=5>5</sl-option>
      <sl-option value=6>6</sl-option>
      <sl-option value=7>7</sl-option>
      <sl-option value=8>8</sl-option>
      <sl-option value=9>9</sl-option>
      <sl-option value=10>10</sl-option>
      <sl-option value=11>11</sl-option>
      <sl-option value=12>12</sl-option>
      <sl-option value=13>13</sl-option>
      <sl-option value=14>14</sl-option>
    </sl-select>

    <!-- vertical spacing -->
    <br />

    <!-- dropdown for map layers -->
    <sl-select id="statusSelect" label="By Construction Status:" value="PRE-CONSTRUCTION">
      <sl-option value="ALL">All</sl-option>
      <sl-option value="PRE-CONSTRUCTION">Pre-Construction</sl-option>
      <sl-option value="UNDER-CONSTRUCTION">Under Construction</sl-option>
      <sl-option value="COMPLETED-CONSTRUCTION">Completed</sl-option>
    </sl-select>

    <!-- Display summary stats inside the drawer -->
    <div style="text-align: center; margin-top: 30px; margin-bottom: -10px;">
      <h3>Filtered Project Metrics</h3>
    </div>
    <div slot="header" style="text-align: center; margin-left: 6px; font-size: 18px; font-weight: 800;">
      Filtered Project Summary
    </div>
    <p style="line-height: 8px;"><strong>Total Projects:</strong> <span id="total-projects">$0</span></p>
    <p style="line-height: 8px;"><strong>Total Cost:</strong> <span id="total-cost">$0</span></p>
    <p style="line-height: 8px;"><strong>Average Cost:</strong> <span id="average-cost">$0</span></p>

    <!-- Checkboxes for additional geographic boundaries -->
    <div style="text-align: center; margin-top: 30px; margin-bottom: -10px;">
      <h3>Additional Boundaries</h3>
    </div>
    <sl-checkbox id="workforceGeo">Workforce Board Areas</sl-checkbox>
    <sl-checkbox id="agingGeo">Area Agencies on Aging</sl-checkbox>
    <sl-checkbox id="rcGeo">Regional Commissions</sl-checkbox>

    <br />

    <!-- close button -->
    <sl-button slot="footer" class="close-button" variant="primary">
      Close
    </sl-button>
  </sl-drawer>

  <!-- Download data button -->
  <sl-tooltip content="Download statewide source data as a CSV.">
    <sl-button id="downloadBtn" variant="plain" outline>
      <sl-icon name="download" style="font-size: 18px; margin-top: 10px;"></sl-icon>
    </sl-button>
  </sl-tooltip>

  <!-- open map filter -->
  <sl-tooltip content="Open side panel for map filters and metrics.">
    <sl-button class="openDrawer" variant="plain" outline>
      <sl-icon slot="prefix" name="filter-circle"></sl-icon>
      More
    </sl-button>
  </sl-tooltip>

  <!-- buttons for Carto base map selection -->
  <div class="radio-container-theme">
    <sl-radio-group label="" name="a" value="light">

      <sl-tooltip content="Enable dark mode.">
        <sl-radio-button value="dark">
          <sl-icon name="moon"></sl-icon>
        </sl-radio-button>
      </sl-tooltip>

      <sl-tooltip content="Enable light mode.">
        <sl-radio-button value="light">
          <sl-icon name="brightness-high"></sl-icon>
        </sl-radio-button>
      </sl-tooltip>
    </sl-radio-group>
  </div>


  <!-- map legend -->
  <div id="legend-pre-construction" class="legend">
    <span class="legend-color" style="background-color: #F39C12"></span>
    <span>Pre-Construction Projects</span>
  </div>

  <div id="legend-under-construction" class="legend">
    <span class="legend-color" style="background-color: #2ECC71"></span>
    <span>Under Construction Projects</span>
  </div>

  <div id="legend-construction-complete" class="legend">
    <span class="legend-color" style="background-color: #2980B9"></span>
    <span>Completed Projects</span>
  </div>

  <div id="legend-all" class="legend">
    <span class="legend-color" style="background-color: #F39C12"></span>
    <span>Pre-Construction Projects</span>
    <br>
    <span class="legend-color" style="background-color: #2ECC71"></span>
    <span>Under Construction Projects</span>
    <br>
    <span class="legend-color" style="background-color: #2980B9"></span>
    <span>Completed Projects</span>
  </div>

  <!-- logos -->
  <div><a href="https://www.atlantaregional.org/" target="_blank"><img src="assets/arc_logo.png" alt="Logo"
        class="arc-logo"></a></div>
  <div><a href="https://www.dot.ga.gov/Pages/default.aspx" target="_blank"><img src="assets/gdot_logo.png" alt="Logo"
        class="gdot-logo"></a></div>

  <!-- Reference the external JavaScript file -->
  <script src="js/main.js" , type="module"></script>
</body>

</html>